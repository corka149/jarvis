<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>
      <%= gettext "Jarvis Â· May I help you" %>
    </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="<%= Routes.static_path(@conn, "/css/app.css") %>"/>
  </head>
  <body>
    <header>
      <nav>
        <!-- DESKTOP -->
        <div class="nav-wrapper">
          <a href="/" class="brand-logo">
            <img class="responsive-img" src="<%= Routes.static_path(@conn, "/images/logo_jarvis.svg") %>" alt="jARVIS">
          </a>
          <a href="#" data-target="mobile-main-menu" class="sidenav-trigger"><i class="material-icons">menu</i></a>
          <ul class="right hide-on-med-and-down">
            <%= if @conn.assigns[:user] do %>
              <li>
                <a href="#" class="dropdown-trigger" data-target="dropdown-shopping-list-desktop">
                  <%= gettext("Shopping list") %>
                </a>
              </li>
              <li>
                <a href="#" class="dropdown-trigger" data-target="dropdown-user-groups-desktop">
                  <%= gettext("User groups") %>
                </a>
              </li>
              <li>
                <%= link gettext("User settings"), to: Routes.user_path(@conn, :show) %>
              </li>
              <li>
                <%= link gettext("Sign out"), to: Routes.auth_path(@conn, :signout) %>
              </li>
            <% else %>
              <li>
                <%= link gettext("Sign in"), to: Routes.auth_path(@conn, :signin) %>
              </li>
            <% end %>
          </ul>
        </div>
      </nav>
      <ul id="dropdown-shopping-list-desktop" class="dropdown-content">
        <li><%= link gettext("All lists"), to: "" %></li>
        <li><%= link gettext("Current lists"), to: "" %></li>
      </ul>
      <ul id="dropdown-user-groups-desktop" class="dropdown-content">
        <li><%= link gettext("Management"), to: "" %></li>
        <li><%= link gettext("Membership"), to: "" %></li>
      </ul>
      <!-- MOBILE -->
      <ul class="sidenav" id="mobile-main-menu">
        <%= if @conn.assigns[:user] do %>
          <li>
            <a href="#" class="dropdown-trigger" data-target="dropdown-shopping-list-mobile"><%= gettext("Shopping list") %></a>
          </li>
          <li>
            <a href="#" class="dropdown-trigger" data-target="dropdown-user-groups-mobile"><%= gettext("User groups") %></a>
          </li>
          <li>
            <%= link gettext("User settings"), to: Routes.user_path(@conn, :show) %>
          </li>
          <li>
            <%= link gettext("Sign out"), to: Routes.auth_path(@conn, :signout) %>
          </li>
        <% else %>
          <li>
            <%= link gettext("Sign in"), to: Routes.auth_path(@conn, :signin) %>
          </li>
        <% end %>
      </ul>
    </header>
    <ul id="dropdown-shopping-list-mobile" class="dropdown-content">
      <li><%= link gettext("All lists"), to: "" %></li>
      <li><%= link gettext("Current lists"), to: "" %></li>
    </ul>
    <ul id="dropdown-user-groups-mobile" class="dropdown-content">
      <li><%= link gettext("Management"), to: "" %></li>
      <li><%= link gettext("Membership"), to: "" %></li>
    </ul>
    <main role="main">
      <p class="alert alert-info center-align" role="alert"><%= get_flash(@conn, :info) %></p>
      <p class="alert alert-danger center-align" role="alert"><%= get_flash(@conn, :error) %></p>
      <%= render @view_module, @view_template, assigns %>
    </main>
    <script type="text/javascript" src="<%= Routes.static_path(@conn, "/js/app.js") %>"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('.dropdown-trigger');
        var instances = M.Dropdown.init(elems, {constrainWidth: false});
      });

      document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('.sidenav');
        var instances = M.Sidenav.init(elems, {});
      });
    </script>
  </body>
</html>
